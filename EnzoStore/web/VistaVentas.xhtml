<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      >
    <h:head>
        <title>Página de Pago</title>
        <link rel="stylesheet" href="resource/css/estilosPago.css"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <script type="text/javascript" language="javascript">

            function realizarPago() {
                var nombreCliente = document.getElementById('nombreCliente').value;
                var telefonoCliente = document.getElementById('telefonoCliente').value;
                var direccionCliente = document.getElementById('direccionCliente').value;
                var referenciaCliente = document.getElementById('referenciaCliente').value;
                var totalCarrito = obtenerParametro('totalCarrito');

                // Llamada AJAX al servidor para registrar el pedido
                controladorVenta.registrarPedido(nombreCliente, telefonoCliente, direccionCliente, referenciaCliente, totalCarrito);
            }

        </script>
    </h:head>
    <h:body>
        <h:form>
            <div class="layout-topbar">
                <a class="menu-button" tabindex="0">
                    <i class="pi pi-bars"></i>
                </a>
                <p:graphicImage class="logoEnzo" value="/resource/images/LogoEnzo.png"/>
                <h1 class="titulo">BIENVENIDOS A ENZO STORE</h1>
                <p:button icon="pi pi-user" onclick="PF('dlg1').show()" class="botonperfil"/>
            </div>
            <div class="contenedor-pago">
                <h2 class="titulo-pago">Página de Pago</h2>

                <div class="form-cliente">
                    <label for="nombreCliente">Nombre y Apellido:</label>
                    <p:inputText id="nombreCliente" value="#{controladorVenta.pedido.nombre}" />
                    <label for="telefonoCliente">Teléfono:</label>
                    <p:inputText id="telefonoCliente" value="#{controladorVenta.pedido.telefono}" />
                    <label for="direccionCliente">Dirección:</label>
                    <p:inputText id="direccionCliente" value="#{controladorVenta.pedido.direccion}" />
                    <label for="referenciaCliente">Número de Referencia:</label>
                    <p:inputText id="referenciaCliente" value="#{controladorVenta.pedido.puntodereferencia}" />
                </div>

                <h3 id="totalCarrito">Total: $#{controladorVenta.obtenerTotalCarrito()}</h3>
                <h:commandButton value="Realizar Pago" action="#{controladorVenta.registrarPedido()}" class="boton-agregar"/>
                <h:commandButton value="Regresar" action="#{controladorVenta.pasarACatalogoCliente()}" class="boton-salir"/>
            </div>
        </h:form>
    </h:body>
</html>
